<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive SVG</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: lightgray; /* Background color */
        }

        #svg-container {
            position: relative;
            width: 100%;
            max-height: 100%;
            aspect-ratio: 1 / 1;
        }
        
        #left-arrow, #right-arrow {
        position: absolute; /* Absolute positioning relative to the nearest positioned ancestor */
        top: 50%;
        transform: translateY(-50%); /* Vertically center the arrows */
        font-size: 2em;
        color: black;
        opacity: 0;
        transition: opacity 2s;
        }   

        #left-arrow { left: 10%; }
        #right-arrow { right: 10%; }
    
    </style>
</head>
<body>
    <div id="left-arrow">&#8592;</div>
    <div id="right-arrow">&#8594;</div>

    <svg id="svg-container" width="100%" height="100%" viewBox="0 0 768 768">
<g transform="translate(0.000000,768.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M4680 3420 c0 -39 -1 -40 -35 -40 -34 0 -35 -1 -35 -40 l0 -40 -40 0
-40 0 0 -650 0 -650 40 0 40 0 0 650 0 650 35 0 c34 0 35 1 35 40 l0 40 310 0
310 0 0 -40 0 -40 40 0 40 0 0 -420 0 -420 35 0 35 0 0 150 0 150 195 0 195 0
0 -650 0 -650 35 0 35 0 0 270 0 270 40 0 40 0 0 -115 0 -115 40 0 40 0 0 -80
0 -80 35 0 c33 0 35 -2 35 -35 0 -34 1 -35 40 -35 l40 0 0 -40 0 -40 40 0 40
0 0 -40 c0 -39 1 -40 35 -40 33 0 35 -2 35 -35 0 -34 1 -35 40 -35 l40 0 0
-40 0 -40 115 0 115 0 0 -40 0 -40 80 0 80 0 0 -75 0 -75 35 0 35 0 0 -345 0
-345 40 0 40 0 0 115 0 115 155 0 155 0 0 -40 c0 -39 1 -40 35 -40 l35 0 0
-75 0 -75 40 0 40 0 0 -155 0 -155 40 0 40 0 0 155 0 155 -40 0 -40 0 0 75 0
75 -40 0 -40 0 0 40 c0 39 -1 40 -35 40 -33 0 -35 2 -35 35 l0 35 -155 0 -155
0 0 195 0 195 -40 0 -40 0 0 75 0 75 -35 0 c-34 0 -35 1 -35 40 l0 40 -80 0
-80 0 0 40 0 40 -115 0 -115 0 0 35 c0 34 -1 35 -40 35 l-40 0 0 40 c0 39 -1
40 -35 40 -34 0 -35 1 -35 40 l0 40 -40 0 c-39 0 -40 1 -40 35 0 34 -1 35 -40
35 l-40 0 0 80 0 80 -35 0 -35 0 0 115 0 115 -40 0 c-39 0 -40 1 -40 35 0 34
-1 35 -40 35 l-40 0 0 345 0 345 -35 0 c-34 0 -35 1 -35 40 l0 40 -195 0 -195
0 0 230 0 230 -35 0 c-34 0 -35 1 -35 40 l0 40 -40 0 -40 0 0 40 0 40 -310 0
-310 0 0 -40z"/>
<path d="M4990 3035 l0 -115 155 0 155 0 0 115 0 115 -155 0 -155 0 0 -115z
m230 0 l0 -35 -75 0 -75 0 0 35 0 35 75 0 75 0 0 -35z"/>
<path d="M4680 2725 l0 -115 155 0 155 0 0 115 0 115 -155 0 -155 0 0 -115z
m240 0 l0 -35 -80 0 -80 0 0 35 0 35 80 0 80 0 0 -35z"/>
<path d="M4990 2345 l0 -115 155 0 155 0 0 115 0 115 -155 0 -155 0 0 -115z
m230 -5 l0 -40 -75 0 -75 0 0 40 0 40 75 0 75 0 0 -40z"/>
<path d="M2610 2340 l0 -40 -40 0 c-39 0 -40 -1 -40 -35 0 -33 -2 -35 -35 -35
l-35 0 0 -310 0 -310 -345 0 -345 0 0 40 0 40 -40 0 -40 0 0 40 0 40 -40 0
c-39 0 -40 1 -40 35 l0 35 -150 0 -150 0 0 -35 c0 -34 -1 -35 -40 -35 l-40 0
0 -40 0 -40 -40 0 -40 0 0 -40 0 -40 -115 0 -115 0 0 -35 c0 -34 -1 -35 -40
-35 l-40 0 0 -40 0 -40 40 0 40 0 0 40 0 40 155 0 155 0 0 75 0 75 40 0 40 0
0 40 0 40 150 0 150 0 0 -40 0 -40 40 0 40 0 0 -230 0 -230 40 0 40 0 0 -40
c0 -39 1 -40 35 -40 l35 0 0 -115 0 -115 80 0 80 0 0 310 0 310 115 0 115 0 0
-310 0 -310 75 0 75 0 0 115 0 115 40 0 40 0 0 40 c0 39 1 40 35 40 l35 0 0
500 0 500 40 0 c39 0 40 1 40 35 l0 35 195 0 195 0 0 -35 c0 -33 2 -35 35 -35
l35 0 0 -115 0 -115 40 0 40 0 0 115 0 115 -40 0 c-39 0 -40 1 -40 35 0 33 -2
35 -35 35 -34 0 -35 1 -35 40 l0 40 -195 0 -195 0 0 -40z m-690 -995 l0 -195
-40 0 -40 0 0 40 c0 39 -1 40 -35 40 l-35 0 0 155 0 155 75 0 75 0 0 -195z
m540 40 l0 -155 -40 0 -40 0 0 -40 0 -40 -40 0 -40 0 0 195 0 195 80 0 80 0 0
-155z"/>
<path d="M2760 1920 l0 -150 1155 0 1155 0 0 35 c0 34 -1 35 -40 35 l-40 0 0
115 0 115 -75 0 -75 0 0 -115 0 -115 -960 0 -960 0 0 115 0 115 -80 0 -80 0 0
-150z"/>
<path d="M1380 1425 l0 -115 -690 0 -690 0 0 -40 0 -40 770 0 770 0 0 155 0
155 -80 0 -80 0 0 -115z"/>
</g>
<rect id="movable-pixel" width="1%" height="1%" fill="blue"></rect>
</svg>
<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const response = await fetch('300.json');
        const sequencedMap = await response.json();

        const svgContainer = document.getElementById('svg-container');
        const pixel = document.getElementById('movable-pixel');
        let currentSequenceNumber = 1; // Start from the first position in the sequence

        function updatePixelPosition(sequenceNumber) {
            for (let y = 0; y < sequencedMap.length; y++) {
                for (let x = 0; x < sequencedMap[y].length; x++) {
                    if (sequencedMap[y][x] === sequenceNumber) {
                        const xPercent = (x / sequencedMap[y].length) * 100;
                        const yPercent = (y / sequencedMap.length) * 100;
                        pixel.setAttribute('x', `${xPercent}%`);
                        pixel.setAttribute('y', `${yPercent}%`);
                        return;
                    }
                }
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') {
                currentSequenceNumber = Math.min(currentSequenceNumber + 1, 69); // Assuming 69 is the last sequence number
            } else if (e.key === 'ArrowLeft') {
                currentSequenceNumber = Math.max(currentSequenceNumber - 1, 1);
            }
            updatePixelPosition(currentSequenceNumber);
        });

        // Touch event handling for mobile users
        document.addEventListener('touchstart', (e) => {
            const touchX = e.touches[0].clientX;
            const screenWidth = window.innerWidth;

            if (touchX < screenWidth / 2) {
                currentSequenceNumber = Math.max(currentSequenceNumber - 1, 1);
            } else {
                currentSequenceNumber = Math.min(currentSequenceNumber + 1, 69);
            }
            updatePixelPosition(currentSequenceNumber);
        });

        // Display and fade out arrows
        const leftArrow = document.createElement('div');
        leftArrow.id = 'left-arrow';
        leftArrow.innerHTML = '&#8592;';
        document.body.appendChild(leftArrow);

        const rightArrow = document.createElement('div');
        rightArrow.id = 'right-arrow';
        rightArrow.innerHTML = '&#8594;';
        document.body.appendChild(rightArrow);

        setTimeout(() => {
            leftArrow.style.opacity = 1;
            rightArrow.style.opacity = 1;

            setTimeout(() => {
                leftArrow.style.opacity = 0;
                rightArrow.style.opacity = 0;
            }, 4000);
        }, 2000);

        updatePixelPosition(currentSequenceNumber); // Set initial position
    });
</script>

</body>
</html>